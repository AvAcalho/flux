"use strict";(globalThis["webpackChunkflux"]=globalThis["webpackChunkflux"]||[]).push([[7615],{40662:(t,e,a)=>{a.r(e),a.d(e,{default:()=>ft});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"inherit"}},[a("div",{staticClass:"body-content-overlay",class:{show:t.showDetailSidebar},on:{click:function(e){t.showDetailSidebar=!1}}}),a("div",{staticClass:"xdao-proposal-list"},[a("div",{staticClass:"app-fixed-search d-flex align-items-center"},[a("div",{staticClass:"sidebar-toggle d-block d-lg-none ml-1"},[a("feather-icon",{staticClass:"cursor-pointer",attrs:{icon:"MenuIcon",size:"21"},on:{click:function(e){t.showDetailSidebar=!0}}})],1),a("div",{staticClass:"d-flex align-content-center justify-content-between w-100"},[a("b-input-group",{staticClass:"input-group-merge"},[a("b-input-group-prepend",{attrs:{"is-text":""}},[a("feather-icon",{staticClass:"text-muted",attrs:{icon:"SearchIcon"}})],1),a("b-form-input",{attrs:{value:t.searchQuery,placeholder:"Search proposals"},on:{input:t.updateRouteQuery}})],1)],1),a("div",{staticClass:"dropdown"},[a("b-dropdown",{attrs:{variant:"link","no-caret":"","toggle-class":"p-0 mr-1",right:""},scopedSlots:t._u([{key:"button-content",fn:function(){return[a("feather-icon",{staticClass:"align-middle text-body",attrs:{icon:"MoreVerticalIcon",size:"16"}})]},proxy:!0}])},[a("b-dropdown-item",{on:{click:t.resetSortAndNavigate}},[t._v(" Reset Sort ")]),a("b-dropdown-item",{attrs:{to:{name:t.$route.name,query:Object.assign({},t.$route.query,{sort:"title-asc"})}}},[t._v(" Sort A-Z ")]),a("b-dropdown-item",{attrs:{to:{name:t.$route.name,query:Object.assign({},t.$route.query,{sort:"title-desc"})}}},[t._v(" Sort Z-A ")]),a("b-dropdown-item",{attrs:{to:{name:t.$route.name,query:Object.assign({},t.$route.query,{sort:"end-date"})}}},[t._v(" Sort End Date ")])],1)],1)]),a("vue-perfect-scrollbar",{ref:"proposalListRef",staticClass:"xdao-proposal-list scroll-area",attrs:{settings:t.perfectScrollbarSettings}},[a("ul",{staticClass:"xdao-media-list"},t._l(t.filteredProposals,(function(e){return a("b-media",{key:e.hash,staticClass:"proposal-item",attrs:{tag:"li","no-body":""},on:{click:function(a){return t.handleProposalClick(e)}}},[a("b-media-body",[a("div",{staticClass:"proposal-title-wrapper"},[a("div",{staticClass:"proposal-title-area"},[a("div",{staticClass:"title-wrapper"},[a("span",{staticClass:"proposal-title"},[a("h4",[t._v(t._s(e.topic))])])])]),a("div",{staticClass:"proposal-item-action"},[a("div",{staticClass:"badge-wrapper mr-1"},[a("b-badge",{staticClass:"text-capitalize",attrs:{pill:"",variant:"light-"+t.resolveTagVariant(e.status)}},[t._v(" "+t._s(e.status)+" ")])],1),e.nickName?a("b-avatar",{attrs:{size:"32",variant:"light-"+t.resolveAvatarVariant(e.status),text:t.avatarText(e.nickName)}}):a("b-avatar",{attrs:{size:"32",variant:"light-secondary"}},[a("feather-icon",{attrs:{icon:"UserIcon",size:"16"}})],1)],1)]),a("div",{staticClass:"proposal-title-area"},[a("div",{staticClass:"title-wrapper"},[a("h6",{staticClass:"text-nowrap text-muted mr-1"},[t._v(" Submitted: "+t._s(new Date(e.submitDate).toLocaleString("en-GB",t.timeoptions.shortDate))+" ")]),a("h6",{staticClass:"text-nowrap text-muted mr-1"},[t._v(" End Date: "+t._s(new Date(e.voteEndDate).toLocaleString("en-GB",t.timeoptions.shortDate))+" ")])])]),a("div",{staticClass:"proposal-progress-area"},[a("h6",{staticClass:"text-nowrap text-muted mr-1"},[t._v(" Required Votes: "+t._s(Number(e.votesRequired).toLocaleString())+" ")]),a("b-progress",{staticClass:"proposal-progress",attrs:{max:e.votesRequired,striped:"",animated:""}},[a("b-progress-bar",{attrs:{id:"progressbar-no-"+e.hash,variant:"danger",value:e.votesNo,"show-progress":""}},[t._v(" No: "+t._s(Number(e.votesNo).toLocaleString())+" ")]),a("b-tooltip",{ref:"tooltip",refInFor:!0,attrs:{target:"progressbar-no-"+e.hash,disabled:e.votesNo/e.votesRequired>.25}},[a("span",[t._v("No: "+t._s(Number(e.votesNo).toLocaleString()))])]),a("b-progress-bar",{attrs:{id:"progressbar-yes-"+e.hash,variant:"success",value:e.votesYes,"show-progress":""}},[t._v(" Yes: "+t._s(Number(e.votesYes).toLocaleString())+" ")]),a("b-tooltip",{ref:"tooltip",refInFor:!0,attrs:{target:"progressbar-yes-"+e.hash,disabled:e.votesYes/e.votesRequired>.25}},[a("span",[t._v("Yes: "+t._s(Number(e.votesYes).toLocaleString()))])])],1)],1)])],1)})),1),a("div",{staticClass:"no-results",class:{show:0===t.filteredProposals.length}},[a("h5",[t._v("No Proposals Found")])])])],1),a("add-proposal-view",{class:{show:t.isAddProposalViewActive},attrs:{zelid:t.zelid},on:{"close-add-proposal-view":function(e){t.isAddProposalViewActive=!1}}}),a("proposal-view",{class:{show:t.isProposalViewActive},attrs:{"proposal-view-data":t.proposal,zelid:t.zelid,"has-next-proposal":!0,"has-previous-proposal":!0},on:{"close-proposal-view":function(e){t.isProposalViewActive=!1}}}),a("portal",{attrs:{to:"content-renderer-sidebar-left"}},[a("proposal-sidebar",{class:{show:t.showDetailSidebar},on:{"close-left-sidebar":function(e){t.showDetailSidebar=!1},"close-proposal-view":function(e){t.isProposalViewActive=!1,t.isAddProposalViewActive=!1},"open-add-proposal-view":function(e){t.isAddProposalViewActive=!0}}})],1)],1)},o=[],r=a(22183),i=a(4060),l=a(27754),n=a(36537),c=a(87379),p=a(23630),d=a(68361),u=a(26034),v=a(47389),b=a(45752),m=a(22981),g=a(18365),h=a(25706),f=a(1923),w=a(23646),x=a(6044),C=a(20266),y=a(41905),S=a(3899),_=a(91040),k=a.n(_),V=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"proposal-details"},[s("div",{staticClass:"proposal-detail-header"},[s("div",{staticClass:"proposal-header-left d-flex align-items-center"},[s("span",{staticClass:"go-back mr-1"},[s("feather-icon",{staticClass:"align-bottom",attrs:{icon:t.$store.state.appConfig.isRTL?"ChevronRightIcon":"ChevronLeftIcon",size:"20"},on:{click:function(e){return t.$emit("close-add-proposal-view")}}})],1),s("h4",{staticClass:"proposal-topic mb-0"},[t._v(" Add Proposal ")])])]),s("vue-perfect-scrollbar",{staticClass:"proposal-scroll-area scroll-area mt-2",attrs:{settings:t.perfectScrollbarSettings}},[s("b-row",{staticClass:"match-height"},[s("b-col",{attrs:{xl:"6",md:"12"}},[s("b-card",{attrs:{title:"Topic"}},[s("b-form-input",{staticClass:"mt-4",attrs:{placeholder:"Proposal Topic"},model:{value:t.proposalTopic,callback:function(e){t.proposalTopic=e},expression:"proposalTopic"}})],1)],1),s("b-col",{attrs:{xl:"6",md:"12"}},[s("b-card",{attrs:{title:"Grant"}},[s("b-form-group",{attrs:{"label-cols":"4",label:"Grant Amount","label-for":"grantAmount"}},[s("b-form-input",{attrs:{id:"grantAmount",placeholder:""},model:{value:t.proposalGrantValue,callback:function(e){t.proposalGrantValue=e},expression:"proposalGrantValue"}})],1),s("b-form-group",{attrs:{"label-cols":"4",label:"Grant Pay to Address","label-for":"grantAddress"}},[s("b-form-input",{attrs:{id:"grantAddress",placeholder:"Flux Address to Receive Grant"},model:{value:t.proposalGrantAddress,callback:function(e){t.proposalGrantAddress=e},expression:"proposalGrantAddress"}})],1)],1)],1)],1),s("b-row",{staticClass:"match-height"},[s("b-col",{attrs:{cols:"12"}},[s("b-card",{attrs:{title:"Description"}},[s("b-form-textarea",{attrs:{placeholder:"Proposal Description",rows:"8"},model:{value:t.proposalDescription,callback:function(e){t.proposalDescription=e},expression:"proposalDescription"}})],1)],1)],1),s("b-row",{staticClass:"match-height"},[s("b-col",{attrs:{xl:"6",md:"12"}},[s("b-card",{attrs:{title:"Name/Nickname"}},[s("b-form-input",{staticClass:"mt-2",attrs:{placeholder:"Name/Nickname of Proposal Owner"},model:{value:t.proposalNickName,callback:function(e){t.proposalNickName=e},expression:"proposalNickName"}})],1)],1),s("b-col",{attrs:{xl:"6",md:"12"}},[s("b-card",{attrs:{title:"Validate"}},[s("div",{staticClass:"text-center"},[s("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],attrs:{variant:"primary",pill:"",size:"lg",disabled:t.proposalValid},on:{click:t.validateProposal}},[t._v(" Validate Proposal ")])],1)])],1)],1),t.proposalValid?s("b-row",[s("b-col",{attrs:{cols:"12"}},[s("b-card",{attrs:{title:"Register Proposal"}},[s("div",{staticClass:"text-center"},[s("h4",[t._v("Proposal Price: "+t._s(t.proposalPrice)+" FLUX")]),s("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],attrs:{variant:"primary",pill:"",size:"lg"},on:{click:t.register}},[t._v(" Register Flux XDAO Proposal ")])],1)])],1)],1):t._e(),t.proposalValid&&t.registrationHash?s("b-row",[s("b-col",{attrs:{cols:"12"}},[s("b-card",{attrs:{title:"Complete Transaction"}},[s("b-row",[s("b-col",{attrs:{xl:"6",md:"12"}},[s("div",{staticClass:"text-center"},[t._v(" To finish registration, please make a transaction of "+t._s(t.proposalPrice)+" Flux to address "),s("b-link",{attrs:{href:"https://explorer.runonflux.io/address/"+t.foundationAddress,target:"_blank","active-class":"primary",rel:"noopener noreferrer"}},[t._v(" "+t._s(t.foundationAddress)+" ")]),t._v(" with the following message: "),s("br"),s("br"),t._v(" "+t._s(t.registrationHash)+" "),s("br"),s("br"),t._v(" The transaction must be mined by "+t._s(new Date(t.validTill).toLocaleString("en-GB",t.timeoptions))+" ")],1)]),s("b-col",{attrs:{xl:"6",md:"12"}},[s("div",{staticClass:"text-center"},[s("p",[t._v(" Pay with Zelcore ")]),s("div",[s("a",{attrs:{href:"zel:?action=pay&coin=zelcash&address="+t.foundationAddress+"&amount="+t.proposalPrice+"&message="+t.registrationHash+"&icon=https%3A%2F%2Fraw.githubusercontent.com%2Frunonflux%2Fflux%2Fmaster%2Fflux_banner.png"}},[s("img",{staticClass:"zelidLogin",attrs:{src:a(94452),alt:"Zel ID",height:"100%",width:"100%"}})])])])])],1)],1)],1)],1):t._e()],1)],1)},P=[],D=a(15193),B=a(23215),N=a(50725),A=a(54240),T=a(85961),R=a(67347),I=a(26253);const z=a(9669),F=a(63005),L={components:{BButton:D.T,BCard:B._,BCol:N.l,BFormGroup:A.x,BFormInput:r.e,BFormTextarea:T.y,BLink:R.we,BRow:I.T,ToastificationContent:S.Z,VuePerfectScrollbar:k()},directives:{Ripple:C.Z},props:{zelid:{type:String,required:!1,default:""}},setup(){const t=(0,y.useToast)(),e=(0,h.iH)(""),a=(0,h.iH)(""),s=(0,h.iH)(0),o=(0,h.iH)(""),r=(0,h.iH)(""),i=(0,h.iH)(!1),l=(0,h.iH)(500),n=(0,h.iH)(null),c=(0,h.iH)(""),p=(0,h.iH)(0),d={maxScrollbarLength:150},u=(e,a,s="InfoIcon")=>{t({component:S.Z,props:{title:a,icon:s,variant:e}})},v=async()=>{const t=await z.get("https://stats.runonflux.io/proposals/price");console.log(t),"success"===t.data.status?l.value=t.data.data:u("danger",t.data.data.message||t.data.data)},b=()=>{if(""!==e.value)if(""!==a.value)if(a.value.length<50)u("danger","Proposal Description is too short");else if(e.value.length<3)u("danger","Proposal Topic is too short");else{if(s.value){const t=/^\d+$/.test(s.value);if(!0!==t)return void u("danger","Proposal Grant Amount needs to be an Integer Number");if(s.value>0&&!o.value)return void u("danger","Proposal Grant Pay to Address missing")}o.value&&/\s/.test(o.value)?u("danger","Proposal Grant Pay to Address Invalid, white space detected"):(v(),i.value=!0)}else u("danger","Proposal Description is Mandatory");else u("danger","Proposal Topic is Mandatory")},m=async()=>{const t={topic:e.value,description:a.value,grantValue:s.value,grantAddress:o.value,nickName:r.value},i=await z.post("https://stats.runonflux.io/proposals/submitproposal",JSON.stringify(t));console.log(i),"success"===i.data.status?(c.value=i.data.data.address,n.value=i.data.data.hash,l.value=i.data.data.amount,p.value=i.data.data.paidTillDate):u("danger",i.data.data.message||i.data.data)};return{perfectScrollbarSettings:d,timeoptions:F,validateProposal:b,proposalTopic:e,proposalDescription:a,proposalGrantValue:s,proposalGrantAddress:o,proposalNickName:r,proposalValid:i,proposalPrice:l,registrationHash:n,validTill:p,foundationAddress:c,register:m}}},O=L;var $=a(1001),H=(0,$.Z)(O,V,P,!1,null,"243caf0c",null);const Z=H.exports;var q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"proposal-details"},[s("div",{staticClass:"proposal-detail-header"},[s("div",{staticClass:"proposal-header-left d-flex align-items-center"},[s("span",{staticClass:"go-back mr-1"},[s("feather-icon",{staticClass:"align-bottom",attrs:{icon:t.$store.state.appConfig.isRTL?"ChevronRightIcon":"ChevronLeftIcon",size:"20"},on:{click:function(e){return t.$emit("close-proposal-view")}}})],1),s("h4",{staticClass:"proposal-topic mb-0"},[t._v(" "+t._s(t.proposalViewData.topic)+" ")])])]),s("vue-perfect-scrollbar",{staticClass:"proposal-scroll-area scroll-area",attrs:{settings:t.perfectScrollbarSettings}},[s("b-card",{attrs:{title:"Proposed By "+t.proposalViewData.nickName}},[s("b-form-textarea",{staticClass:"description-text",attrs:{id:"textarea-rows",rows:"10",readonly:"",value:t.proposalViewData.description}})],1),s("b-row",{staticClass:"mt-1 match-height"},[s("b-col",{attrs:{xxl:"4",lg:"12"}},[s("b-card",{attrs:{title:"Status"}},[s("div",{staticClass:"text-center badge-wrapper mr-1"},[s("b-badge",{staticClass:"text-uppercase",attrs:{pill:"",variant:"light-"+t.resolveTagVariant(t.proposalViewData.status)}},[t._v(" "+t._s(t.proposalViewData.status)+" ")])],1)])],1),s("b-col",{attrs:{xxl:"4",md:"6",sm:"12"}},[s("b-card",{attrs:{title:"Start Date"}},[s("p",{staticClass:"text-center date"},[t._v(" "+t._s(new Date(Number(t.proposalViewData.submitDate)).toLocaleString("en-GB",t.timeoptions.shortDate))+" ")])])],1),s("b-col",{attrs:{xxl:"4",md:"6",sm:"12"}},[s("b-card",{attrs:{title:"End Date"}},[s("p",{staticClass:"text-center date"},[t._v(" "+t._s(new Date(Number(t.proposalViewData.voteEndDate)).toLocaleString("en-GB",t.timeoptions.shortDate))+" ")])])],1)],1),s("b-row",{staticClass:"match-height"},[s("b-col",{attrs:{lg:"6"}},[s("b-card",{attrs:{"no-body":""}},[s("b-card-header",[s("h4",{staticClass:"mb-0"},[t._v(" Vote Overview ")])]),s("vue-apex-charts",{attrs:{type:"radialBar",height:"200",options:t.voteOverviewRadialBar,series:t.voteOverview.series}}),s("b-row",{staticClass:"text-center mx-0"},[s("b-col",{staticClass:"border-top border-right d-flex align-items-between flex-column py-1",attrs:{cols:"6"}},[s("b-card-text",{staticClass:"text-muted mb-0"},[t._v(" Required ")]),s("h3",{staticClass:"font-weight-bolder mb-0"},[t._v(" "+t._s(Number(t.proposalViewData.votesRequired).toLocaleString())+" ")])],1),s("b-col",{staticClass:"border-top d-flex align-items-between flex-column py-1",attrs:{cols:"6"}},[s("b-card-text",{staticClass:"text-muted mb-0"},[t._v(" Received ")]),s("h3",{staticClass:"font-weight-bolder mb-0"},[t._v(" "+t._s(Number(t.proposalViewData.votesTotal).toLocaleString())+" ")])],1)],1)],1)],1),s("b-col",{attrs:{lg:"6"}},[s("b-card",{attrs:{"no-body":""}},[s("b-card-header",[s("h4",{staticClass:"mb-0"},[t._v(" Vote Breakdown ")])]),s("vue-apex-charts",{attrs:{type:"radialBar",height:"200",options:t.voteBreakdownRadialBar,series:t.voteBreakdown.series}}),s("b-row",{staticClass:"text-center mx-0"},[s("b-col",{staticClass:"border-top border-right d-flex align-items-between flex-column py-1",attrs:{cols:"6"}},[s("b-card-text",{staticClass:"text-muted mb-0"},[t._v(" Yes ")]),s("h3",{staticClass:"font-weight-bolder mb-0 text-success"},[t._v(" "+t._s(Number(t.proposalViewData.votesYes).toLocaleString())+" ")])],1),s("b-col",{staticClass:"border-top d-flex align-items-between flex-column py-1",attrs:{cols:"6"}},[s("b-card-text",{staticClass:"text-muted mb-0"},[t._v(" No ")]),s("h3",{staticClass:"font-weight-bolder mb-0 text-danger"},[t._v(" "+t._s(Number(t.proposalViewData.votesNo).toLocaleString())+" ")])],1)],1)],1)],1)],1),s("b-row",{staticClass:"match-height"},[s("b-col",{attrs:{lg:"6"}},[s("b-card",{attrs:{title:"Grant Amount"}},[s("div",{staticClass:"text-center badge-wrapper mr-1"},[s("b-badge",{staticClass:"text-uppercase",attrs:{pill:"",variant:"light-primary"}},[t._v(" "+t._s(Number(t.proposalViewData.grantValue).toLocaleString())+" FLUX ")])],1)])],1),s("b-col",{attrs:{lg:"6"}},[s("b-card",{attrs:{title:"Grant Address"}},[s("div",{staticClass:"text-center badge-wrapper mr-1"},[s("h4",[s("b-link",{attrs:{href:"https://explorer.runonflux.io/address/"+t.proposalViewData.grantAddress,target:"_blank","active-class":"primary",rel:"noopener noreferrer"}},[t._v(" "+t._s(t.proposalViewData.grantAddress)+" ")])],1)])])],1)],1),"Open"===t.proposalViewData.status?s("div",[t.haveVoted?s("b-row",[s("b-col",{attrs:{cols:"12"}},[s("b-card",{attrs:{title:"Your Vote"}},[s("div",{staticClass:"text-center badge-wrapper mr-1"},[s("b-badge",{staticClass:"vote-badge",attrs:{pill:"",variant:"light-"+("No"===t.myVote?"danger":"success")}},[t._v(" "+t._s(t.myVote.toUpperCase())+" x"+t._s(t.myNumberOfVotes)+" ")])],1)])],1)],1):s("b-row",{staticClass:"match-height"},[s("b-col",{attrs:{xl:"3",md:"5"}},[s("b-card",{attrs:{title:"Vote Now!"}},[s("p",[t._v("You haven't voted yet! You have a total of "+t._s(t.myNumberOfVotes)+" available.")]),s("div",[s("p",[t._v(" To vote you need to first sign a message with Zelcore with your ZelID corresponding to your Flux Nodes. ")]),s("div",[s("a",{attrs:{href:"zel:?action=sign&message="+t.dataToSign+"&icon=https%3A%2F%2Fraw.githubusercontent.com%2Frunonflux%2Fflux%2Fmaster%2FzelID.svg&callback="+t.callbackValueSign()},on:{click:t.initiateSignWS}},[s("img",{staticClass:"zelidLogin",attrs:{src:a(94452),alt:"Zel ID",height:"100%",width:"100%"}})])])])])],1),s("b-col",{attrs:{xl:"5",md:"7"}},[s("b-card",[s("b-row",{staticClass:"mt-2"},[s("b-col",{staticClass:"mb-1",attrs:{cols:"12"}},[s("b-form-group",{attrs:{label:"Message","label-for":"h-message","label-cols-md":"3"}},[s("b-form-input",{attrs:{id:"h-message",readonly:"",placeholder:"Message to Sign"},model:{value:t.dataToSign,callback:function(e){t.dataToSign=e},expression:"dataToSign"}})],1)],1),s("b-col",{staticClass:"mb-1",attrs:{cols:"12"}},[s("b-form-group",{attrs:{label:"Address","label-for":"h-address","label-cols-md":"3"}},[s("b-form-input",{attrs:{id:"h-address",placeholder:"Insert ZelID"},model:{value:t.userZelid,callback:function(e){t.userZelid=e},expression:"userZelid"}})],1)],1),s("b-col",{staticClass:"mb-1",attrs:{cols:"12"}},[s("b-form-group",{attrs:{label:"Signature","label-for":"h-signature","label-cols-md":"3"}},[s("b-form-input",{attrs:{id:"h-signature",placeholder:"Insert Signature"},model:{value:t.signature,callback:function(e){t.signature=e},expression:"signature"}})],1)],1)],1)],1)],1),s("b-col",{attrs:{xl:"4",md:"12"}},[s("b-card",{staticClass:"text-center"},[s("p",[t._v("Remember, you can't change your vote! After voting it could take around 5 minutes to see the number of votes updated with your vote.")]),s("div",{attrs:{id:"vote-yes-button"}},[s("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"vote-button d-block mt-2",attrs:{variant:"success",size:"lg",pill:"",disabled:!t.signature},on:{click:function(e){return t.vote(!0)}}},[t._v(" YES ")])],1),s("b-tooltip",{ref:"tooltip",attrs:{disabled:!!t.signature,target:"vote-yes-button"}},[s("span",[t._v("Please enter a Signature")])]),s("div",{attrs:{id:"vote-no-button"}},[s("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"vote-button d-block mt-2",attrs:{variant:"danger",size:"lg",pill:"",disabled:!t.signature},on:{click:function(e){return t.vote(!1)}}},[t._v(" NO ")])],1),s("b-tooltip",{ref:"tooltip",attrs:{disabled:!!t.signature,target:"vote-no-button"}},[s("span",[t._v("Please enter a Signature")])])],1)],1)],1)],1):t._e()],1)],1)},G=[],j=a(87047),Y=a(64206),E=a(37307),U=a(67166),M=a.n(U),W=a(68934);const J=a(9669),Q=a(80129),X=a(58971),K=a(63005),tt={components:{BBadge:u.k,BButton:D.T,BCard:B._,BCardHeader:j.p,BCardText:Y.j,BCol:N.l,BFormGroup:A.x,BFormInput:r.e,BFormTextarea:T.y,BLink:R.we,BRow:I.T,BTooltip:g.T,ToastificationContent:S.Z,VuePerfectScrollbar:k(),VueApexCharts:M()},directives:{Ripple:C.Z},props:{proposalViewData:{type:Object,required:!0},zelid:{type:String,required:!1,default:""},hasNextProposal:{type:Boolean,required:!0},hasPreviousProposal:{type:Boolean,required:!0}},setup(t,e){const a=(0,h.Fl)((()=>e.root.$store.state.flux.config)),s=(0,y.useToast)(),o=t=>"Open"===t?"warning":"Passed"===t?"success":"Unpaid"===t?"info":t&&t.startsWith("Rejected")?"danger":"primary",r=async()=>{const t=await J.get("https://stats.runonflux.io/general/messagephrase");return"success"===t.data.status&&t.data.data},{xdaoOpenProposals:i}=(0,E.Z)(),l=(0,h.iH)(0),n=(0,h.iH)(""),c=(0,h.iH)("No"),p=(0,h.iH)(!1),d=(0,h.iH)(null),u=(0,h.iH)("");u.value=t.zelid;const v=(0,h.Fl)((()=>null!==d.value)),b=async()=>{let e=`https://stats.runonflux.io/proposals/votepower?zelid=${u.value}`;t.proposalViewData.hash&&(e=`https://stats.runonflux.io/proposals/votepower?zelid=${u.value}&hash=${t.proposalViewData.hash}`);const a=await J.get(e);console.log(a),"success"===a.data.status?l.value=a.data.data.power:l.value=0},m=async()=>{const e=await J.get(`https://stats.runonflux.io/proposals/voteInformation?hash=${t.proposalViewData.hash}&zelid=${u.value}`);return e.data},g=async()=>{if(u.value){l.value=0;const e=await m();if("success"===e.status){const a=e.data;"Open"===t.proposalViewData.status&&(null==a||0===a.length?(await b(),p.value=!1):(a.forEach((t=>{l.value+=t.numberOfVotes})),c.value="No",a[0].vote&&(c.value="Yes"),p.value=!0))}}},f=()=>{const{protocol:t,hostname:s,port:o}=window.location;let r="";r+=t,r+="//";const i=/[A-Za-z]/g;if(s.match(i)){const t=s.split(".");t[0]="api",r+=t.join(".")}else{if("string"===typeof s&&e.root.$store.commit("flux/setUserIp",s),+o>16100){const t=+o+1;e.root.$store.commit("flux/setFluxPort",t)}r+=s,r+=":",r+=a.value.apiPort}const l=X.get("backendURL")||r,n=`${l}/id/providesign`;return encodeURI(n)},w=t=>{console.log(t)},x=t=>{console.log(t)},C=t=>{const e=Q.parse(t.data);"success"===e.status&&e.data&&(d.value=e.data.signature),console.log(e),console.log(t)},_=t=>{console.log(t)},k=()=>{const{protocol:t,hostname:s,port:o}=window.location;let r="";r+=t,r+="//";const i=/[A-Za-z]/g;if(s.match(i)){const t=s.split(".");t[0]="api",r+=t.join(".")}else{if("string"===typeof s&&e.root.$store.commit("flux/setUserIp",s),+o>16100){const t=+o+1;e.root.$store.commit("flux/setFluxPort",t)}r+=s,r+=":",r+=a.value.apiPort}let l=X.get("backendURL")||r;l=l.replace("https://","wss://"),l=l.replace("http://","ws://");const c=u.value+n.value.slice(-13),p=`${l}/ws/sign/${c}`,d=new WebSocket(p);d.onopen=t=>{x(t)},d.onclose=t=>{_(t)},d.onmessage=t=>{C(t)},d.onerror=t=>{w(t)}},V=async()=>{n.value=await r(),g()},P={maxScrollbarLength:150},D=(0,h.iH)({series:[]}),B=(0,h.iH)({series:[]});(0,h.YP)((()=>t.proposalViewData),(()=>{console.log(t.proposalViewData),D.value={series:[(t.proposalViewData.votesTotal/t.proposalViewData.votesRequired*100).toFixed(1)]},0!==t.proposalViewData.votesTotal?B.value={series:[(t.proposalViewData.votesYes/t.proposalViewData.votesTotal*100).toFixed(0)]}:B.value={series:[0]},V()}));const N=(t,e,a="InfoIcon")=>{s({component:S.Z,props:{title:e,icon:a,variant:t}})},A=async e=>{const a={hash:t.proposalViewData.hash,zelid:u.value,message:n.value,signature:d.value,vote:e};console.log(a);const s=await J.post("https://stats.runonflux.io/proposals/voteproposal",JSON.stringify(a));console.log(s),"success"===s.data.status?(N("success","Vote registered successfully"),c.value=e?"Yes":"No",p.value=!0,i.value-=1):N("danger",s.data.data.message||s.data.data)},T={chart:{height:200,type:"radialBar",sparkline:{enabled:!0},dropShadow:{enabled:!0,blur:3,left:1,top:1,opacity:.1}},colors:[W.j.primary],plotOptions:{radialBar:{offsetY:-10,startAngle:-150,endAngle:150,hollow:{size:"77%"},track:{background:W.j.dark,strokeWidth:"70%"},dataLabels:{name:{show:!1},value:{color:W.j.light,fontSize:"2.3rem",fontWeight:"600"}}}},fill:{type:"gradient",gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:[W.j.success],inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,100]}},stroke:{lineCap:"round"},grid:{padding:{bottom:30}}},R={chart:{height:200,type:"radialBar",sparkline:{enabled:!0},dropShadow:{enabled:!0,blur:3,left:1,top:1,opacity:.1}},colors:[W.j.primary],labels:["Yes"],plotOptions:{radialBar:{offsetY:-10,startAngle:-150,endAngle:150,hollow:{size:"77%"},track:{background:W.j.dark,strokeWidth:"50%"},dataLabels:{name:{offsetY:-15,color:W.j.light,fontSize:"1.5rem"},value:{offsetY:10,color:W.j.light,fontSize:"2.86rem",fontWeight:"600"}}}},fill:{type:"gradient",gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:[W.j.success],inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,100]}},stroke:{lineCap:"round"},grid:{padding:{bottom:30}}};return{perfectScrollbarSettings:P,voteOverviewRadialBar:T,voteBreakdownRadialBar:R,resolveTagVariant:o,timeoptions:K,voteOverview:D,voteBreakdown:B,vote:A,initiateSignWS:k,callbackValueSign:f,myVote:c,haveVoted:p,myNumberOfVotes:l,dataToSign:n,signature:d,hasSignature:v,onError:w,onOpen:x,onClose:_,onMessage:C,userZelid:u}}},et=tt;var at=(0,$.Z)(et,q,G,!1,null,"358b8cce",null);const st=at.exports;var ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sidebar-left"},[a("div",{staticClass:"sidebar"},[a("div",{staticClass:"sidebar-content xdao-sidebar"},[a("div",{staticClass:"xdao-app-menu"},[a("div",{staticClass:"add-task"},[a("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],attrs:{variant:"primary",block:""},on:{click:function(e){t.$emit("close-proposal-view"),t.$emit("close-left-sidebar"),t.$emit("open-add-proposal-view")}}},[t._v(" Add Proposal ")])],1),a("vue-perfect-scrollbar",{staticClass:"sidebar-menu-list scroll-area",attrs:{settings:t.perfectScrollbarSettings}},[a("b-list-group",{staticClass:"list-group-filters"},t._l(t.taskFilters,(function(e){return a("b-list-group-item",{key:e.title+t.$route.path,attrs:{to:e.route,active:t.isDynamicRouteActive(e.route)},on:{click:function(e){t.$emit("close-proposal-view"),t.$emit("close-left-sidebar")}}},[a("feather-icon",{staticClass:"mr-75",attrs:{icon:e.icon,size:"18"}}),a("span",{staticClass:"align-text-bottom line-height-1"},[t._v(t._s(e.title))])],1)})),1)],1)],1)])])])},rt=[],it=a(70322),lt=a(88367);const nt={directives:{Ripple:C.Z},components:{BButton:D.T,BListGroup:it.N,BListGroupItem:lt.f,VuePerfectScrollbar:k()},props:{},setup(){const t={maxScrollbarLength:60},e=[{title:"All Proposals",icon:"MailIcon",route:{name:"xdao-app"}},{title:"Open",icon:"StarIcon",route:{name:"xdao-app-filter",params:{filter:"open"}}},{title:"Passed",icon:"CheckIcon",route:{name:"xdao-app-filter",params:{filter:"passed"}}},{title:"Unpaid",icon:"StarIcon",route:{name:"xdao-app-filter",params:{filter:"unpaid"}}},{title:"Rejected",icon:"TrashIcon",route:{name:"xdao-app-filter",params:{filter:"rejected"}}}];return{perfectScrollbarSettings:t,taskFilters:e,isDynamicRouteActive:w._d}}},ct=nt;var pt=(0,$.Z)(ct,ot,rt,!1,null,null,null);const dt=pt.exports,ut=a(80129),vt=a(9669),bt=a(63005),mt={components:{BFormInput:r.e,BInputGroup:i.w,BInputGroupPrepend:l.P,BDropdown:n.R,BDropdownItem:c.E,BMedia:p.P,BMediaBody:d.D,BBadge:u.k,BAvatar:v.SH,BProgress:b.D,BProgressBar:m.Q,BTooltip:g.T,AddProposalView:Z,ProposalView:st,ProposalSidebar:dt,VuePerfectScrollbar:k(),ToastificationContent:S.Z},directives:{Ripple:C.Z},setup(){const t=(0,h.iH)(null),e=(0,h.iH)(null),a=(0,y.useToast)();(0,h.wF)((()=>{const t=localStorage.getItem("zelidauth"),a=ut.parse(t);e.value=a.zelid}));const{showDetailSidebar:s}=(0,x.w)(),{route:o,router:r}=(0,w.tv)(),i=(0,h.Fl)((()=>o.value.query.sort)),l=(0,h.Fl)((()=>o.value.query.q)),n=(0,h.Fl)((()=>o.value.params));(0,h.YP)(n,(()=>{k()}));const c=(0,h.iH)([]),p=["latest","title-asc","title-desc","end-date"],d=(0,h.iH)(i.value);(0,h.YP)(i,(t=>{p.includes(t),d.value=t}));const u=()=>{const t=JSON.parse(JSON.stringify(o.value.query));delete t.sort,r.replace({name:o.name,query:t}).catch((()=>{}))},v=(0,h.iH)({}),b=(t,e,s="InfoIcon")=>{a({component:S.Z,props:{title:e,icon:s,variant:t}})},m=t=>"Open"===t?"warning":"Passed"===t?"success":"Unpaid"===t?"info":t.startsWith("Rejected")?"danger":"primary",g=t=>"Open"===t?"warning":"Passed"===t?"success":"Unpaid"===t?"info":t.startsWith("Rejected")?"danger":"primary",C=(0,h.iH)(l.value);(0,h.YP)(l,(t=>{C.value=t})),(0,h.YP)([C,d],(()=>k()));const _=t=>{const e=JSON.parse(JSON.stringify(o.value.query));t?e.q=t:delete e.q,r.replace({name:o.name,query:e})},k=async()=>{const t=await vt.get("https://stats.runonflux.io/proposals/listProposals");"success"===t.data.status?(c.value=t.data.data,r.currentRoute.params.filter&&("open"===r.currentRoute.params.filter&&(c.value=c.value.filter((t=>"Open"===t.status))),"passed"===r.currentRoute.params.filter&&(c.value=c.value.filter((t=>"Passed"===t.status))),"unpaid"===r.currentRoute.params.filter&&(c.value=c.value.filter((t=>"Unpaid"===t.status))),"rejected"===r.currentRoute.params.filter&&(c.value=c.value.filter((t=>"Rejected"===t.status||"Rejected Unpaid"===t.status||"Rejected Not Enough Votes"===t.status)))),C.value&&(c.value=c.value.filter((t=>!!t.topic.toLowerCase().includes(C.value)||(!!t.description.toLowerCase().includes(C.value)||!!t.nickName.toLowerCase().includes(C.value))))),d.value&&c.value.sort(((t,e)=>"title-asc"===d.value?t.topic.localeCompare(e.topic):"title-desc"===d.value?e.topic.localeCompare(t.topic):"end-date"===d.value?t.voteEndDate-e.voteEndDate:0))):b("danger",t.data.data.message||t.data.data)};k();const V=(0,h.iH)(!1),P=(0,h.iH)(!1),D=t=>{v.value=t,V.value=!0},B={maxScrollbarLength:150};return{zelid:e,proposalListRef:t,timeoptions:bt,proposal:v,handleProposalClick:D,updateRouteQuery:_,searchQuery:C,filteredProposals:c,sortOptions:p,resetSortAndNavigate:u,perfectScrollbarSettings:B,resolveTagVariant:m,resolveAvatarVariant:g,avatarText:f.k3,isProposalViewActive:V,isAddProposalViewActive:P,showDetailSidebar:s}}},gt=mt;var ht=(0,$.Z)(gt,s,o,!1,null,null,null);const ft=ht.exports},6044:(t,e,a)=>{a.d(e,{w:()=>r});var s=a(25706),o=a(73507);const r=()=>{const t=(0,s.iH)(!1),e=(0,s.Fl)((()=>o.Z.getters["app/currentBreakPoint"]));return(0,s.YP)(e,((e,a)=>{"md"===a&&"lg"===e&&(t.value=!1)})),{mqShallShowLeftSidebar:t}}},1923:(t,e,a)=>{a.d(e,{k3:()=>s});a(70560),a(23646);const s=t=>{if(!t)return"";const e=t.split(" ");return e.map((t=>t.charAt(0).toUpperCase())).join("")}},63005:(t,e,a)=>{a.r(e),a.d(e,{default:()=>r});const s={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"},o={year:"numeric",month:"short",day:"numeric"},r={shortDate:s,date:o}},94452:(t,e,a)=>{t.exports=a.p+"img/zelID.svg"}}]);